\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{physsummer-tikzart}

\tikzset{
    %% Кролик (см rayon/2017-08-3)
    tikzart-bunny/.pic = {
	    \filldraw[thick, color = black, fill = white] (0, 0) .. controls (-1.1, 0) and (-0.4, 0.2) .. (-0.3, 0.2)
            coordinate (BLegLeft)% нижняя лапка
            to[in = -70, out = 140] ++(130 : 0.5) coordinate (BArmBottom) % верхняя лапка
            .. controls ($(BArmBottom) + (-90 : 0.2)$) and
            ($(BArmBottom) + (-0.25, 0.07) + (-90 : 0.2)$) .. ($(BArmBottom) + (-0.25, 0.07)$)
            .. controls ($(BArmBottom) + (-0.25, 0.07) + (90 : 0.1)$)
            and ($(BArmBottom) + (105 : 0.3) + (-170 : 0.1)$)
            .. ($(BArmBottom) + (105 : 0.3)$) coordinate (BArmTop)
            to[out = 110, in = -110 ] ++(80 : 0.15) coordinate (BHeadBottom)
            .. controls ($(BHeadBottom) + (-0.2, 0)$)
            and ($(BHeadBottom) + (70 : 0.5) + (-0.6, -0.1) $)
            .. ($(BHeadBottom) + (70 : 0.5)$) coordinate (BHeadTop)
            .. controls ($(BHeadTop) + (70:0.4)$)
            and ($(BHeadTop) + (25 : 0.8) + (-0.2, -.05)$)
            .. ($(BHeadTop) + (25 : 0.8)$) coordinate (BEarTop)
            to[out = -110, in = 20] ++(-140:0.5) coordinate (BEar)
            to[out = 10, in = 160] ++(0:0.5)
            to[out = -130, in = -10] ++(-0.6, -0.25) coordinate (BEarBottom)
            to[out = -110, in = 80] ++(0, -0.15) coordinate (BBackTop)
            .. controls ($(BBackTop) + (0.3, 0)$)
            and ($(BBackTop) + (-45:0.9) + (100:0.3)$)
            .. ($(BBackTop) + (-45:0.9)$) coordinate (BTailTop)
            .. controls ($(BTailTop) + (20:0.4)$)
            and ($(BTailTop) + (-110:0.3) + (-30:0.5)$)
            .. ($(BTailTop) + (-110:0.3)$)
            to[out = -150, in = 30 ] ++(-150:0.1) coordinate (BLegRight)
            .. controls ($(BLegRight) + (-90:.1)$)
            and (0.25, 0) .. (0, 0);
        \draw[fill = black] (BHeadTop) ++(-120:0.2) circle (0.04);
        \draw (BLegLeft) to[out = 0, in = 170] ++(0.15, 0) .. controls
            ($(BLegLeft) + (0.15, 0) + (170 : 0.1)$) and
            ($(BLegLeft) + (0.15, 0) + (60:0.5) + (-0.5, 0.1)$)
            .. ($(BLegLeft) + (0.15, 0) + (60:0.5)$);
    },
    %% Вагон поезда (см. rayon/2010-09-3)
    % Размер картинки 0.4 * 0.24, привязка к левому нижнему углу
    % Зачем этот файл здесь?
    % А где ему ещё быть?
    % Казалось бы одноразовые картинки, но пусть будет здесь.
    tikzart-train/.pic = {
        \filldraw (0.05, 0.03) circle (0.03);
        \filldraw (0.13, 0.03) circle (0.03);
        \filldraw (0.35, 0.03) circle (0.03);
        \filldraw (0.27, 0.03) circle (0.03);
        
        \draw[rounded corners = 1pt, fill = black!15] (0, 0.04) rectangle  ++(0.4, 0.2);
        \draw[fill = white] (0.05, 0.13) rectangle ++(0.06, 0.07);
        \draw[fill = white] (0.17, 0.13) rectangle ++(0.06, 0.07);
        \draw[fill = white] (0.29, 0.13) rectangle ++(0.06, 0.07);
        
        \draw[ultra thin] (0.05, 0.09) -- ++(0.3, 0);
        \draw[ultra thin] (0.05, 0.1) -- ++(0.3, 0);
    },
    %% Первый вагон поезда (см. rayon/2010-09-3)
    % Размер картинки 0.5 * 0.24, привязка к левому нижнему углу
    tikzart-trainhead/.pic = {
        \filldraw (0.05, 0.03) circle (0.03);
        \filldraw (0.15, 0.03) circle (0.03);
        \filldraw (0.4, 0.03) circle (0.03);

        \draw[rounded corners = 1pt, fill = white] (0.1, 0.24) -- (0.3, 0.24) -- (0.5, 0.13) --
            ++(0, -0.04); 
        \draw[rounded corners = 1pt, fill = black!15] (0, 0.04) -- ++(0.5, 0) -- ++(0, 0.09) --
            ++(-0.05, 0.01) -- ++(-0.15, 0) -- ++(0, 0.1) -- ++(-0.3, 0) -- (0, 0.04);
        
        \draw[fill = white] (0.05, 0.13) rectangle ++(0.06, 0.07);
        \draw[fill = white] (0.17, 0.13) rectangle ++(0.06, 0.07);
        
        \draw[ultra thin] (0.05, 0.09) -- ++(0.37, 0);
        \draw[ultra thin] (0.05, 0.1) -- ++(0.37, 0);
    },
    % координаты нижнего угла дула (5, 1.1)
    tikzart-gun/.pic = {
        \coordinate (a) at (0.8, 1);
        \coordinate (b) at (1.05, 0.9);
        \coordinate (f) at (1.1, 1.22);
        \coordinate (p) at (0.95, 1.2);
        \path[name path = line_1] (a) -- (f);
        \path[name path = arc_1] (p) arc (170:210:0.2);
        \path[name path = arc_2] (p) arc (140:180:0.45);
        \path[name path = line_3] (a) -- (-0.4, 0.9) -- (-0.7, 0.2) -- (0.65, 0.65) -- (b)
            to[rounded corners = 3pt] (4, 1) -- (4, 1.1) -- (1.1, 1.1) to[rounded corners = 1pt] (f) --
            cycle;
        \path[name intersections = {of = line_1 and arc_1}];
        \coordinate (f1) at (intersection-1);
        \path[name intersections = {of = line_1 and arc_2}];
        \coordinate (f2) at (intersection-1);
        \draw[fill = black!70] (f2) to[bend left, rounded corners = 1pt] (p) to[bend right] (f1) --
            cycle;
        \shade[left color = black!15!white, right color = black!90!white, opacity = 0.9] (a) --
            (-0.4, 0.9) -- (-0.7, 0.2) -- (0.65, 0.65) -- (b) to[rounded corners = 3pt] (4, 1) --
            (4, 1.1) -- (1.1, 1.1) to[rounded corners = 1pt] (f) -- cycle;
        \shade[left color = black!40, right color = black!90, opacity = 0.6] (1.1, 1.16) -- (5, 1.16) --
            (5, 1.07) -- (4, 1.07) -- (4, 1.1) -- (1.1, 1.1) -- cycle;
        \coordinate (st) at ({-0.4 + 0.1}, 0.9);
        \coordinate (en) at ({-0.7 + 0.1}, 0.2);
        \path[name path = line_4] ($(st)!1.3!(en)$) -- ($(en)!1.3!(st)$);
        \path[name intersections = {of = line_3 and line_4}];
        \fill[brown] (-0.4, 0.9) -- (intersection-1) -- (intersection-2) -- (-0.7, 0.2) -- cycle;
        \draw (intersection-1) -- (intersection-2);
        \draw[thick] (a) -- (-0.4, 0.9) -- (-0.7, 0.2) -- (0.65, 0.65) -- (b) to[rounded corners = 3pt]
            (4, 1) -- (4, 1.1) -- (1.1, 1.1) to[rounded corners = 1pt] (f) -- cycle;
        \draw (1.1, 1.16) -- (5, 1.16) -- (5, 1.07) -- (4, 1.07) -- (4, 1.1) -- (1.1, 1.1) -- cycle;
        \path[name path = line_2] (0.65, 0.65) -- (b) -- (4, 1);
        \path[name path = arc_3] (0.9, 0.9) ellipse (0.42 and 0.2);
        \path[name intersections = {of = line_2 and arc_3}];
        \draw (intersection-2) to[bend left] (intersection-1);
        \coordinate (pn) at (1.07, 0.8);
        \path[name path = arc_4] (pn) arc (250:100:0.2);
        \path[name path = arc_5] (pn) arc (250:100:0.5);
        \path[name intersections = {of = line_2 and arc_4}];
        \coordinate (pn1) at (intersection-1);
        \path[name intersections = {of = line_2 and arc_5}];
        \coordinate (pn2) at (intersection-1);
        \draw[fill = black] (pn1) to[bend right] (pn) to[bend left] (pn2);
        \fill[black] (4.85, 1.16) -- (4.95, 1.16) to[rounded corners = 2pt] (4.94, 1.26) -- cycle;
        \fill[fill = white] (1.2, 1.11) rectangle (1.3, 1.24);
        \shade[left color = black!50, right color = black!90, opacity = 0.9] (1.2, 1.11)
            rectangle (1.3, 1.24);
        \draw (1.2, 1.11) rectangle (1.3, 1.24);
    },
    % нижняя левая точка (0, 0)
    tikzart-cat/.pic = {
        \filldraw [smooth] (0, 0) .. controls (1, 0) and (1, 0) .. (2, 1)
            .. controls (3, 2) and (4.8,8.8) .. (2,10.3)
    		.. controls (1.2, 11) and (2.8, 12) .. (2,13.8)
    		.. controls (.8, 15.4) and (-.8, 15.4) .. (-2,13.8)
    		.. controls (-2.8, 12) and (-1.2, 11) .. (-2,10.3)
    		.. controls (-4.8, 8.8) and (-3, 2) .. (-2, 1)
    		.. controls (-1, 0) and (-1, 0) .. (0, 0);
        \filldraw (0.6, 14.6) to[out = 45, in = 190] (1.9, 15.6) to[out = -95, in = 60] (1.6, 14);
        \filldraw (-0.6, 14.6) to[out = 135, in = -10] (-1.9, 15.6) to[out = -85, in = 120] (-1.6, 14);
        \filldraw[line width = 0.5] (0.8, 0.6) to[out = 0, in = 180] (7, 9)
            to[out = 0, in = 100] ++(3, -2) 
    		to[in = 0, out = -80] (7, 8)
    		to[out = 180, in = 0] (1, 0.1);

        % усы
        \foreach \a in {-10, 0, 10}{
            \fill[shift = {(0, 11.81)}, rotate = \a] (-3.5, 0.06) rectangle (3.5, -0.06);
        }
    },
    % огонь
    tikzart-fire/.pic = {
        \filldraw (0, 0) .. controls (0.3, 0) and (0.6, 0.1) .. (0.7, 0.3)
            .. controls (0.8, 0.5) and (0.85, 0.6) .. (0.8, 0.9)
            .. controls (0.75, 1.1) and (0.7, 1.2) .. (0.6, 1.4)
            .. controls (0.65, 1.2) and (0.6, 1.05) .. (0.5, 0.9)
            .. controls (0.5, 1.2) and (0.2, 1.3) .. (0.1, 1.6)
            .. controls (0.05, 1.75) and (0.1, 2) .. (0.2, 2.1)
            .. controls (-0.1, 2) and (-0.2, 1.85) .. (-0.3, 1.7)
            .. controls (-0.4, 1.5) and (-0.45, 1.3) .. (-0.4, 1.1)
            .. controls (-0.5, 1.2) and (-0.51, 1.4) .. (-0.5, 1.5)
            .. controls (-0.75, 1.2) and (-0.8, 0.7) .. (-0.7, 0.5)
            .. controls (-0.6, 0.28) and (-0.4, 0) .. (0, 0);
            \fill[white] (0, 0) .. controls (0.3, 0) and (0.52, 0.34) .. (0.37, 0.61)
            .. controls (0.4, 0.54) and (0.32, 0.32) .. (0.25, 0.25)
            .. controls (0.3, 0.35) and (0.25, 0.5) .. (0.2, 0.6)
            .. controls (0.1, 0.8) and (-0.05, 1) .. (0, 1.2)
            .. controls (-0.32, 1) and (-0.3, 0.72) .. (-0.2, 0.47)
            .. controls (-0.3, 0.51) and (-0.31, 0.6) .. (-0.33, 0.7)
            .. controls (-0.4, 0.6) and (-0.4, 0.5) .. (-0.4, 0.4)
            .. controls (-0.35, 0.18) and (-0.2, 0) .. (0, 0);
    },
    % Пёсель
    % Нижняя левая точка (0, 0), смотрит налево, размеры (2.56, 2.01)
    tikzart-dog/.pic = {
	    \filldraw[thin, scale = 0.25] (4.34, 5.55) ++(120 : 0.15) -- ++(120 : 2.35)
            to[out = 120, in = 0] ++(-0.3, 0.3) to[out = 180, in = 60] ++(-0.3, -0.6)
            to[out = 150, in = 0] ++(-0.3, 0.2) to[out = 180, in = 80] ++(-0.4, -0.8)
            arc (90 : 180 : 0.75) -- ++(210 : 1)
            to[out = 210, in = 180] ++(1.75, -0.8) -- ++(-80 : 1.5)
            to[out = -80, in = 150] ++(1 / 3, -1 / 3) -- ++(-94 : 2.65)
            to[out = -94, in = -100] ++(1, 0) -- ++(80 : 2.65) -- ++(5 : 2.5)
            to[out = -90, in = 150] ++(0.75, -1) -- ++(-30 : 1.2) -- ++(-100 : 1.25)
            to[out = -100, in = -100] ++(1, 0) -- ++(80 : 1.7) -- ++(135 : 1)
            to[out = 60, in = -45] ++(-0.25, 2.25) to[out = 30, in = 240] ++(2, 2)
            to[out = 60, in = 60] ++(-1 / 3, 0.25) to[out = 230, in = 10] ++(-2, -1.7)
            -- ++(-3.45, 0) to[out = 180, in = -60] cycle;
    },
    % Катер вид сверху
    % Привязка (0,0) к середине кормы
    % Размер 1 * 3 
    tikzart-cutter/.pic={
    	\fill 
    		(0,0) to (.5,0) to [out = 80, in = -90] ++ (.1, 1)
    			to [out = 90, in = -60] (0, 3)
    		(0,0) to (- .5,0) to [out = 100, in = -90] ++ (-.1, 1)
    			to [out = 90, in = -120] (0, 3);
    	\fill [white]
    		(.45, .4) to 
    		(.45, 1.2) to [out = 90, in = -50] 
    		(0, 2.4) to [out = -130, in = 90] 
    		(-.45, 1.2) to (-.45, .4) to  
    		(-.4, 1.2) to [out = 90, in =180] 
    		(0,1.6) to [out = 0, in = 90] (.4, 1.2);
    	\fill [white, rounded corners = 1pt]
    		(-.28, 1.2) rectangle ++ (.25, .25)
    		(.28, 1.2) rectangle ++ (-.25, .25)
    		(-.28, .7) rectangle ++ (.25, .25)
    		(.28, .7) rectangle ++ (-.25, .25)
    		(-.4, .2) rectangle (.4, .4);
    },
	%% Машина вид сверху
	%% (0, 0) -- нижний левый угол
	%% Размер 1.36 * 2.5
	tikzart-car/.pic={
		\def\dl{0.34}
		\def\ds{0.16}
		\def\dhf{0.4}
		\def\dhb{0.88}
		\def\rat{0.15}
		\def\s{1};
		\def\l{2.5};
		%% Колёса
		\filldraw (0.12 - \ds * \rat, \dhb - \dl) rectangle ++ (\ds, \dl)
			({0.12 + \s - \ds * ( 1 - \rat)}, \dhb - \dl) rectangle ++ (\ds, \dl)
			(0.12 - \ds * \rat, \l - \dhf - \dl) rectangle ++ (\ds, \dl)
			({0.12 + \s - \ds * ( 1 - \rat)}, \l - \dhf - \dl) rectangle ++ (\ds, \dl);
		%% Машина
		\filldraw[color = black, fill = white]
			(0.18, \s / 4) to ++(0, \l - \s / 2)
			to[out = 90, in = 180] ++(\s / 4, \s / 4)
			to ++(\s / 2 - 0.12, 0)
			to[out = 0, in = 90] ++(\s / 4, -\s / 4)
			to ++(0, -\l + \s / 2)
			to[out = -90, in = 0] ++(-\s / 4, - \s / 4)
			to ++(-\s / 2 + 0.12, 0)
			to[out = -180, in = -90] ++(-\s / 4, \s / 4) -- cycle;
		%% Стекла
		\filldraw 
			(0.12 + \s / 6, 0.7 * \l)
			to[out = 20, in = 160] ++(2 * \s / 3, 0)
			to++(-\s / 12, -\l / 5)
			to[out = 170, in = 10] ++(- 3 * \s / 6, 0);
		\filldraw 
			(0.12 + \s / 6, \l / 5) 
			to[out = -20, in = -160] ++(2 * \s / 3, 0) 
			to++(-\s / 18, \l / 8) 
			to[out = -175, in = -5]++(- 10 * \s / 18, 0);
		%% Окна
		\filldraw[color = black, fill = white]
			(0.12 + \s / 12, 0.65 * \l)
			to[out = 210, in = 90] ++ (- 0.2, -0.15)
			to [out = -90, in = -170] ++(0 : 0.2);
		\filldraw[color = black, fill = white, xscale = -1]
			(-0.12 - 11 * \s / 12, 0.65 * \l)
			to[out = 210, in = 90] ++ (- 0.2, -0.15)
			to [out = -90, in = -170] ++(0 : 0.2);
	},
	%% Муравей, вид сбоку
	%% (0, 0) -- середина нижней границы
	%% Размеры муравья 0.76 x 0.38
	%% Смотрит направо
	%% Пример rayon 2010-08-4
	tikzart-ant/.pic = {
		\def\r{0.08}
		\begin{scope}[shift = {(0.02, 0.2)}]
			\def\a{10}
			\fill (0, 0) circle (\r);
			\fill (\a : 2.2 * \r) circle (1.2 * \r);
			\fill (180 : \r)
			to[out = 90 + \a, in = 90 + \a] ++(180 + \a : 4 * \r)
			to[out = -90 + \a, in = -90 + \a] ++(\a : 4 * \r);
			\draw[thick] (-180 + 4 * \a : \r) -- ++(-180 - \a : 1.2 * \r) -- (-4.5 * \r, -2.5 * \r);
			\draw[thick] (-180 + 6 * \a : \r) -- ++(-180 : 0.8 * \r) -- (-1.5 * \r, -2.5 * \r);
			\draw[thick] (-90 + 4 * \a : \r) -- ++(-1.7 * \a : 1.2 * \r) -- (2.9 * \r, -2.5 * \r);
			\draw (\a : 2.2 * \r) ++(60 : 1.2 * \r) to[out = 60, in = 120] ++(1.5 * \r, 0.5 * \r);
			\draw (\a : 2.2 * \r) ++(50 : 1.2 * \r) to[out = 50, in = 120] ++(1.5 * \r, 0.5 * \r);
		\end{scope}
		%% Привязка и граница картинки
%		\fill[red] (0, 0) circle(0.01); 
%		\draw[red] (-0.38, 0) rectangle ++(0.76, 0.38);
	},
    %% Гном
    %% высота 1, привязка к центру
    %% rayon/2017-08-3
    tikzart-dwarf/.pic = {
       \draw 
        %% шапка
        (-.1, 0) to [out = 90, in = -105] (0, .5) 
                         to [out = -75, in = 90] (.1, 0)
                         to cycle
        %% границы лица
        (-.1, 0) to [out = -80] (-.05, -.1) 
                         to [out = 30, in = 150] (.05, -.1)
                         to [in = -100] (.1, 0)
        %% контур бороды
        (-.1, 0) to [out = -120, in = 140] (0, -.25)
                         to [in = -60, out = 40] (.1, 0)
        %% тело
        (-.12, -.12) 
            to [out = -150, in = 125] coordinate [pos=.9] (L) (-.12, -.4) 
            to (.12, -.4)
            to [out = 55, in = -30] coordinate [pos=.1] (R)  (.12, -.12)
        %% ноги
        (-.07, -.4) to (-.04, -.5)
                to [out = 180, in = 90] (-.09, -.53 ) 
                to (0, -.53) to (0, -.4)
        (.07, -.4) to (.04, -.5)
                to [out = 0, in = 90] (.09, -.53 ) 
                to (0, -.53) to (0, -.4)
        %% пояc
        (L) to (R)
        %% куртка
        ($(L)!.5!(R)$) to (0, -.25)
        %% руки
        (-.11, -.17) to [out = -100, in = 105]  (-.1, -.35)
        (.11, -.17) to [out = -80, in = 75]  (.1, -.35)
        ;
    \fill
        %% глаза
        (-.04, -.04) circle (.012)
        (.04, -.04) circle (.012)
        %% рот
        (-.02, -.12) rectangle (.02, -.11)
        ;
    },
	%% Пассажирский реактивный самолёт by Тима
	%% Что-то типа Airbus A340, но пожирнее
	%% (0,0) на носу. Длина фюзеляжа 3.6
	tikzart-plane/.pic={
		\pgfgettransformentries{\a}{\b}{\c}{\d}{\s}{\p}
		\def\sca{sqrt(\a*\d-\b*\c)}
		%% Правое крыло
		\draw[fill=white] (1.2,.15) to[rounded corners=\sca*4] ++ (1,.3) to[rounded corners=\sca*2] ++ (.4,0) to ++ (-.7,-.3);
		%% Правое горизонтальное оперение
		\draw[fill=white] (3.1,.25) ++ (.3,.09) to[rounded corners=\sca*3] ++ (.2,.06) to[rounded corners=\sca*1] ++ (.2,0) to ++ (-.3,-.15);
		%% Фюзеляж и вертикальное оперение
		\draw[fill=white] (.6,-.15) to[rounded corners=\sca*7] ++ (2,0) to ++ (1,.3) to ++ (0,.1) to ++ (-.1,.01) ++(-.5,.05) coordinate (A) ++(.5,-.05) to[rounded corners=\sca*1] ++ (.3,.4) to[rounded corners=\sca*3] ++ (-.2,0) to (A) to[rounded corners=\sca*4] ++ (-.4,.04) to ++ (-2,0) arc (90:180:.6 and .35) arc (180:270:.6 and .15);
		%% Кабина
		\path (.6,.35) arc (90:145:.6 and .35) coordinate (B) ++ (.18,0) coordinate (C);
		\fill (B) arc (145:160:.6 and .35) to ++ (.14,0) coordinate (D) |- cycle;
		\fill (D) ++ (.02,0) rectangle (C);
		%% Турбины
		\begin{scope}[shift={(1.4,-.3)}, scale=.25]
			\draw[fill=white] (0,.5) to[rounded corners=\sca*4] ++ (.7,0) to ++ (.8,-.2) arc (90:-90:.1 and .3) to[rounded corners=\sca*4] ++ (-.8,-.2) to ++ (-.7,0);
			\draw[fill=white] circle (.2 and .5);
			\fill (0,.4) arc (90:270:.12 and .4) arc (270:450:.08 and .4);
		\end{scope}
		\begin{scope}[shift={(1.6,-.4)}, scale=.25]
			\draw[fill=white] (0,.5) to[rounded corners=\sca*4] ++ (.7,0) to ++ (.8,-.2) arc (90:-90:.1 and .3) to[rounded corners=\sca*4] ++ (-.8,-.2) to ++ (-.7,0);
			\draw[fill=white] circle (.2 and .5);
			\fill (0,.4) arc (90:270:.12 and .4) arc (270:450:.08 and .4);
		\end{scope}
		%% Левое крыло
		\draw[fill=white] (1.2,-.05) to[rounded corners=\sca*4] ++ (1,-.5) to[rounded corners=\sca*2] ++ (.4,0) to ++ (-.7,.5);
		%% Левое горизонтальное оперение
		\draw[fill=white] (3.1,.15) to[rounded corners=\sca*3] ++ (.5,-.25) to[rounded corners=\sca*1] ++ (.2,0) to ++ (-.3,.25);
		%% Иллюминаторы
		\foreach \x in {0,...,20} \fill ({.1*\x+.6},.1) ellipse (.025 and .035);
	}
}


\endinput
