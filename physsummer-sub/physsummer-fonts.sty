\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{physsummer-fonts}

% for different compilers
\RequirePackage{ifpdf}
\RequirePackage{ifluatex}

\ifpdf
    \ifluatex % if LuaLaTex, then 
        \RequirePackage{luatextra} % LuaLaTeX fontspec и макросы
        \RequirePackage{polyglossia}  
        \setdefaultlanguage{russian}
        \usepackage[unicode]{hyperref}
    \else % if pdflatex, then
        \RequirePackage[utf8]{inputenc}
        \RequirePackage[T2A]{fontenc}
        \RequirePackage[russian]{babel}
        \RequirePackage[unicode]{hyperref}
        \RequirePackage[pdftex]{graphicx}
        \RequirePackage{cmlgc}
        \endinput
    \fi
\else % if xelatex, then
% xelatex specific packages
\RequirePackage[cm-default]{fontspec}
    \RequirePackage[xetex]{hyperref}
    \RequirePackage{xltxtra} % \XeLaTeX macro
    \RequirePackage{xunicode} % some extra unicode support
    \defaultfontfeatures{Mapping = tex-text}
    \RequirePackage{polyglossia} % instead of babel in xelatex
    \setdefaultlanguage[spelling = modern]{russian}
\fi

%\let\mathbbtemp\mathbb % кроме, как все испортить, не вижу примуществ пока что.
%\RequirePackage{unicode-math}
%\let\mathbb\mathbbtemp

\defaultfontfeatures{Renderer = Basic, Ligatures = TeX} % для работы лигатур
\setotherlanguage{english}

\newfontfamily\cyrillicfont{Linux Libertine}
\setmainfont{Linux Libertine}
\IfFontExistsTF{Consolas}{
    \setmonofont{Consolas}
}{
}
\newfontfamily{\cyrillicfonttt}{Linux Biolinum O}
\setsansfont{Linux Biolinum O}
\IfFontExistsTF{Cambria Math}{
    \setmathfont{Cambria Math}
    \setmathfont[range = {\leqslant, \geqslant}]{Latin Modern Math}
}{
    %Тут надо бы какой-то шрифт попроще.
}

\endinput